{% extends "layout.html" %}
{% block title %}Home{% endblock %}
{% block head %}
  {{ super() }}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/react.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/JSXTransformer.js"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.4.0/animate.css">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.js"></script>
  <style>
    html, body {
      background-color: black;
      font-family: sf;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    body > div {
        -webkit-overflow-scrolling: touch;
    }

    .selector {
      background-color: #D8D8D8;
      opacity: 0.28;
      position: absolute;
      height: 160px;
      width: 100%;
      top: 280px;
      transition: top 0.5s ease;

    }

    .item-container {
      height: 160px;

      /*margin: 5px 0;*/

    }

    .item {
      color: white;
      opacity: 1;

    }

    a {
      font-size: 80px;
      color: white;
      text-decoration: none;
      line-height: 160px;
    }


    .clock {
      padding-top: 20px;
      color: white;
      text-align: center;
      font-size: 30px;
      height: 60px;
    }

    .goodmorning {
      padding-top: 70px;
      height: 130px;
      color: #F2F4FF;
      text-align: center;
      font-size: 45px;
    }
  </style>
{% endblock %}
{% block body %}
  {{ super() }}
  <div class="clock">7:20 PM</div>
  <div class="goodmorning">Goodmorning, Michelle.</div>
  <div class="selector animated slideInDown"></div>
  <div class="menu-group animated fadeInLeft">
    <div class="item-container" id="scr">
      <div class="item">
        <a href="/screensaver" >Screensavers</a>
      </div>
    </div>
    <div class="item-container" id="clk">
      <div class="item">
        <a href="/clock" >Clock</a>
      </div>
    </div>
    <div class="item-container" id="cal">
      <div class="item">
        <a href="/calendar" >Calendar</a>
      </div>
    </div>
    <div class="item-container" id="quo">
      <div class="item">
        <a href="/quotes" >Quotes</a>
      </div>
    </div>
  </div>
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script>
    var sections = ["scr", "clk", "cal", "quo"];
    var selection = 0;
    var count = 0;
    var delta = 100;
    $(function(){
      $(document).on('mousewheel', function(event){
        // console.log(event.deltaX, event.deltaY, event.deltaFactor);

        count += event.deltaY;

        if (count >= 0) {
          count = 0;
        }

        if (count <= -(sections.length - 1)*100) {
          count = -(sections.length - 1)*100
        }
        var s = Math.abs(parseInt(count / 100))

        if (s !== selection) {
          // change classes. All for
          // $('#'+sections[s]).addClass("selected")
          console.log(s, $('#'+sections[s]))
          $('.selector').css('top', (s * 160) + 280 + 'px')
          // for (var i = 0; i < sections.length; i++) {
          //   if(i !== s) {
          //     $('#'+sections[i]).removeClass("selected")
          //   }
          // }
          selection = s
        }
        // console.log(count);
      });

      $(document).on('click', function(event){
        console.log(sections[selection]);
        $(".menu-group").removeClass("fadeInLeft");
        $(".menu-group").addClass("bounceOutUp");
        setTimeout(function(){
          $("#"+sections[selection]+" a")[0].click()
        },400);


      });

      function getTime() {
        var d = new Date();
        var hours = d.getHours();
        var minutes = d.getMinutes();
        var ampm = hours >= 12 ? 'PM' : 'AM';
        hours = hours % 12;
        hours = hours ? hours : 12; // the hour '0' should be '12'
        minutes = minutes < 10 ? '0'+minutes : minutes;
        var strTime = hours + ':' + minutes + ' ' + ampm;
        $(".clock").text(strTime);
      }
      getTime();
      var int = setInterval(getTime, 5000);


    });


  </script>
{% endblock %}
